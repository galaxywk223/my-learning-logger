{# templates/settings_layout.html (REVISED FOR APPEARANCE LINK) #}
{% extends "base.html" %}

{% block title %}应用设置{% endblock %}

{% block content %}
<style>
    .settings-layout {
        display: flex;
        gap: 2rem;
    }
    .settings-nav {
        flex-shrink: 0;
        width: 220px;
    }
    .settings-nav .nav-link {
        color: #e9ecef;
        background-color: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        margin-bottom: 0.5rem;
        transition: all 0.2s ease-in-out;
    }
    .settings-nav .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.4);
        transform: translateX(5px);
    }
    .settings-nav .nav-link.active {
        background-color: var(--color-primary);
        border-color: var(--color-primary);
        color: white;
        font-weight: 500;
    }
    .settings-content {
        flex-grow: 1;
    }
    .settings-card .card-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }
    .settings-card .card-title {
        font-family: 'Poppins', sans-serif;
    }
    .danger-zone {
        border-color: #dc3545;
    }
    .danger-zone .card-header {
        background-color: #f8d7da;
        color: #58151c;
    }
</style>

<div class="page-header">
    <h1>应用设置</h1>
    <p class="lead text-secondary mb-0">集中管理您的账户、内容和数据。</p>
</div>

<div class="settings-layout">
    <aside class="settings-nav">
        <div class="list-group">
            <a href="{{ url_for('main.settings_account') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'main.settings_account' %}active{% endif %}">
                <i data-lucide="user" class="me-2"></i>账户设置
            </a>

            {# NEW: Link to the Appearance Settings page #}
            <a href="{{ url_for('main.settings_appearance') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'main.settings_appearance' %}active{% endif %}">
                <i data-lucide="palette" class="me-2"></i>外观设置
            </a>

            <a href="{{ url_for('stage.manage_stages') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'stage.manage_stages' %}active{% endif %}">
                <i data-lucide="flag" class="me-2"></i>阶段管理
            </a>
            <a href="{{ url_for('category_management.manage_categories') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'category_management.manage_categories' %}active{% endif %}">
                <i data-lucide="folder-kanban" class="me-2"></i>分类管理
            </a>
            <a href="{{ url_for('motto_management.manage_mottos') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'motto_management.manage_mottos' %}active{% endif %}">
                <i data-lucide="quote" class="me-2"></i>格言管理
            </a>
            <a href="{{ url_for('records.settings_data') }}"
               class="list-group-item list-group-item-action nav-link {% if request.endpoint == 'records.settings_data' %}active{% endif %}">
                <i data-lucide="database" class="me-2"></i>数据管理
            </a>
        </div>
    </aside>

    <main class="settings-content">
        {% block settings_content %}{% endblock %}
    </main>
</div>
{% endblock %}

{% block scripts %}
<script>
    lucide.createIcons();
</script>
{% block page_scripts %}{% endblock %}
{% endblock %}